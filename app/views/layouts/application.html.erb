<!DOCTYPE html>
<html>
  <head>
    <title>GTMGap</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">

    <script type="text/javascript">
        $(document).on('turbolinks:load', function() {
            <%= yield :javascript %>

            // find object
            var fn = window['<%= "#{controller_name}_#{action_name}" %>'];
            // is object a function?
            if (typeof fn === "function"){
              fn.apply(null, [JSON.parse('<%= raw params.to_json %>')]);
            }
        });
    </script>

  </head>

  <body>

    <%= render 'layouts/menu' %></div>

    <div class="container mb-50">
      <%= yield %>
      <hr class="my-4"></hr>
    </div>

  </body>
</html>
